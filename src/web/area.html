<!DOCTYPE html>
<html>

<style>
body {
    background-color: #557882;
}

.main {
    display: block;
    background-color: #557882;
    margin: auto;
}

.tracts {
    stroke: #5B5A53;
}

.q0 { fill: #C1BEAF; }
.q1 { fill: #75736A; }
.q2 { fill: #42413C; }
.q3 { fill: #353430; }

.stops {
    fill: #DBC76F;
}

.system {
    stroke: #DBC76F;
}

</style>

<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://d3js.org/queue.v1.min.js"></script>
<script src="http://d3js.org/topojson.v1.min.js"></script>

<script>
var w = 800,
    h = 750;

var path = d3.geo.path().projection(null).pointRadius(2);

var svg = d3.select("body").append("svg")
    .attr("width", w)
    .attr("height", h)
    .attr("class", "main");

d3.json('data.topojson', function (error, nyc) {
    var areas = [];

    var geos = nyc.objects.tracts.geometries;
    for (var i = 0; i < geos.length; i++) {
        areas.push(geos[i].properties.area);
    }

    var min = Math.min.apply(null, areas),
        max = Math.max.apply(null, areas);

    var color = d3.scale.quantize()
                    // .domain([11.4, 17.9])
                    .domain([min, max])
                    .range(['q0', 'q1', 'q2', 'q3']);
    svg.append("g")
        .attr("class", "tracts")
      .selectAll("path")
        .data(topojson.feature(nyc, nyc.objects.tracts).features)
      .enter().append("path")
        .attr("class", function(d) { return color(d.properties.area); })
        .attr("d", path);

    svg.append("g")
        .attr("class", "stops")
      .selectAll("path")
        .data(topojson.feature(nyc, nyc.objects.stops).features)
      .enter().append("path")
        .attr("d", path);

    svg.append("g")
        .attr("class", "system")
      .selectAll("path")
        .data(topojson.feature(nyc, nyc.objects.system).features)
      .enter().append("path")
        .attr("d", path);
});

</script>

</body>
</html>
